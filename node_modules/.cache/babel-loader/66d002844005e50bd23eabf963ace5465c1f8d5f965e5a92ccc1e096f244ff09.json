{"ast":null,"code":"import axios from 'axios';\nimport { toast } from 'react-toastify';\nconst api = ({\n  method,\n  url,\n  body,\n  onSuccess,\n  onError,\n  onEnd\n}) => {\n  // Retrieve the token from localStorage \n  const token = localStorage.getItem('token');\n\n  // Configure the headers \n  const headers = {\n    'Content-Type': 'application/json'\n  };\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  // Make the request\n  axios({\n    method,\n    url,\n    data: body,\n    headers: headers\n  }).then(response => {\n    if (onSuccess) onSuccess(response.data, toast);\n  }).catch(error => {\n    var _error$response, _error$response$data, _error$response2, _error$response4;\n    const message = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'An error occurred';\n    toast.error(message);\n    if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 422) {\n      var _error$response3, _error$response3$data;\n      const errors = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.errors) || {};\n      if (onError) onError(errors);\n    } else if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n  }).finally(() => {\n    if (onEnd) onEnd();\n  });\n};\nexport default api;","map":{"version":3,"names":["axios","toast","api","method","url","body","onSuccess","onError","onEnd","token","localStorage","getItem","headers","data","then","response","catch","error","_error$response","_error$response$data","_error$response2","_error$response4","message","status","_error$response3","_error$response3$data","errors","removeItem","window","location","href","finally"],"sources":["C:/Users/olaah/Downloads/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst api = ({ method, url, body, onSuccess, onError, onEnd }) => {\n\n    // Retrieve the token from localStorage \n    const token = localStorage.getItem('token');\n\n    // Configure the headers \n    const headers = {\n        'Content-Type': 'application/json'\n    };\n\n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Make the request\n    axios({\n        method,\n        url,\n        data: body,\n        headers: headers\n    })\n        .then((response) => {\n            if (onSuccess) onSuccess(response.data, toast);\n        })\n        .catch((error) => {\n            const message = error.response?.data?.message || 'An error occurred';\n            toast.error(message);\n\n            if (error.response?.status === 422) {\n                const errors = error.response?.data?.errors || {};\n                if (onError) onError(errors);\n            } else if (error.response?.status === 401) {\n                localStorage.removeItem('token');\n                window.location.href = '/login';\n            }\n        })\n        .finally(() => {\n            if (onEnd) onEnd();\n        });\n};\n\nexport default api;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,GAAG,GAAGA,CAAC;EAAEC,MAAM;EAAEC,GAAG;EAAEC,IAAI;EAAEC,SAAS;EAAEC,OAAO;EAAEC;AAAM,CAAC,KAAK;EAE9D;EACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;EAE3C;EACA,MAAMC,OAAO,GAAG;IACZ,cAAc,EAAE;EACpB,CAAC;EAED,IAAIH,KAAK,EAAE;IACPG,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EAChD;;EAEA;EACAT,KAAK,CAAC;IACFG,MAAM;IACNC,GAAG;IACHS,IAAI,EAAER,IAAI;IACVO,OAAO,EAAEA;EACb,CAAC,CAAC,CACGE,IAAI,CAAEC,QAAQ,IAAK;IAChB,IAAIT,SAAS,EAAEA,SAAS,CAACS,QAAQ,CAACF,IAAI,EAAEZ,KAAK,CAAC;EAClD,CAAC,CAAC,CACDe,KAAK,CAAEC,KAAK,IAAK;IAAA,IAAAC,eAAA,EAAAC,oBAAA,EAAAC,gBAAA,EAAAC,gBAAA;IACd,MAAMC,OAAO,GAAG,EAAAJ,eAAA,GAAAD,KAAK,CAACF,QAAQ,cAAAG,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBL,IAAI,cAAAM,oBAAA,uBAApBA,oBAAA,CAAsBG,OAAO,KAAI,mBAAmB;IACpErB,KAAK,CAACgB,KAAK,CAACK,OAAO,CAAC;IAEpB,IAAI,EAAAF,gBAAA,GAAAH,KAAK,CAACF,QAAQ,cAAAK,gBAAA,uBAAdA,gBAAA,CAAgBG,MAAM,MAAK,GAAG,EAAE;MAAA,IAAAC,gBAAA,EAAAC,qBAAA;MAChC,MAAMC,MAAM,GAAG,EAAAF,gBAAA,GAAAP,KAAK,CAACF,QAAQ,cAAAS,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBX,IAAI,cAAAY,qBAAA,uBAApBA,qBAAA,CAAsBC,MAAM,KAAI,CAAC,CAAC;MACjD,IAAInB,OAAO,EAAEA,OAAO,CAACmB,MAAM,CAAC;IAChC,CAAC,MAAM,IAAI,EAAAL,gBAAA,GAAAJ,KAAK,CAACF,QAAQ,cAAAM,gBAAA,uBAAdA,gBAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;MACvCb,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC;MAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACnC;EACJ,CAAC,CAAC,CACDC,OAAO,CAAC,MAAM;IACX,IAAIvB,KAAK,EAAEA,KAAK,CAAC,CAAC;EACtB,CAAC,CAAC;AACV,CAAC;AAED,eAAeN,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}