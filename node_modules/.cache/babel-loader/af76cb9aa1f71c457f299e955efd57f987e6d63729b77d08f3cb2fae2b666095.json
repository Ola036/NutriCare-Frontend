{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{ENDPOINTS}from'../config/constants';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";const UserContext=/*#__PURE__*/createContext();export function useUser(){return useContext(UserContext);}export function UserProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem('token');if(token){api({url:ENDPOINTS.USER.PROFILE,method:'GET',onSuccess:data=>{setUser(data,token);},onError:()=>{setUser(null);},onEnd:()=>{setLoading(false);}});}else{setLoading(false);}},[]);const login=(userData,token)=>{localStorage.setItem('token',token);setUser(userData);};const logout=()=>{localStorage.removeItem('token');setUser(null);};return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user,login,logout},children:children});}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","ENDPOINTS","api","jsx","_jsx","UserContext","useUser","UserProvider","_ref","children","user","setUser","setLoading","token","localStorage","getItem","url","USER","PROFILE","method","onSuccess","data","onError","onEnd","login","userData","setItem","logout","removeItem","Provider","value"],"sources":["C:/Users/olaah/Downloads/project/src/contexts/UserContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { ENDPOINTS } from '../config/constants';\nimport api from '../services/api';\n\nconst UserContext = createContext();\n\nexport function useUser() {\n  return useContext(UserContext);\n}\n\nexport function UserProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n\n    if (token) {\n      api({\n        url: ENDPOINTS.USER.PROFILE,\n        method: 'GET',\n        onSuccess: (data) => {\n          setUser(data, token);\n        },\n        onError: () => {\n          setUser(null);\n        },\n        onEnd: () => {\n          setLoading(false);\n        }\n      });\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const login = (userData, token) => {\n    localStorage.setItem('token', token);\n    setUser(userData);\n  }\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n  }\n\n  return (\n    <UserContext.Provider value={{\n      user,\n      login,\n      logout\n    }}>\n      {children}\n    </UserContext.Provider>\n  );\n}\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,MAAO,CAAAC,GAAG,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElC,KAAM,CAAAC,WAAW,cAAGR,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAS,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAR,UAAU,CAACO,WAAW,CAAC,CAChC,CAEA,MAAO,SAAS,CAAAE,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,EAAGa,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAErCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C,GAAIF,KAAK,CAAE,CACTX,GAAG,CAAC,CACFc,GAAG,CAAEf,SAAS,CAACgB,IAAI,CAACC,OAAO,CAC3BC,MAAM,CAAE,KAAK,CACbC,SAAS,CAAGC,IAAI,EAAK,CACnBV,OAAO,CAACU,IAAI,CAAER,KAAK,CAAC,CACtB,CAAC,CACDS,OAAO,CAAEA,CAAA,GAAM,CACbX,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CACDY,KAAK,CAAEA,CAAA,GAAM,CACXX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAC,CACJ,CAAC,IAAM,CACLA,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAY,KAAK,CAAGA,CAACC,QAAQ,CAAEZ,KAAK,GAAK,CACjCC,YAAY,CAACY,OAAO,CAAC,OAAO,CAAEb,KAAK,CAAC,CACpCF,OAAO,CAACc,QAAQ,CAAC,CACnB,CAAC,CAED,KAAM,CAAAE,MAAM,CAAGA,CAAA,GAAM,CACnBb,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC,CAChCjB,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAED,mBACEP,IAAA,CAACC,WAAW,CAACwB,QAAQ,EAACC,KAAK,CAAE,CAC3BpB,IAAI,CACJc,KAAK,CACLG,MACF,CAAE,CAAAlB,QAAA,CACCA,QAAQ,CACW,CAAC,CAE3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}