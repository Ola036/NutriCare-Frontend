{"ast":null,"code":"import axios from'axios';import{toast}from'react-toastify';const api=_ref=>{let{method,url,body,onSuccess,onError,onEnd}=_ref;// Retrieve the token from localStorage \nconst token=localStorage.getItem('token');// Configure the headers \nconst headers={'Content-Type':'application/json'};if(token){headers['Authorization']=`Bearer ${token}`;}// Make the request\naxios({method,url,data:body,headers:headers}).then(response=>{if(onSuccess)onSuccess(response.data,toast);}).catch(error=>{var _error$response,_error$response$data,_error$response2,_error$response4;const message=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'An error occurred';toast.error(message);if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===422){var _error$response3,_error$response3$data;const errors=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.errors)||{};if(onError)onError(errors);}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===401){localStorage.removeItem('token');window.location.href='/login';}}).finally(()=>{if(onEnd)onEnd();});};export default api;","map":{"version":3,"names":["axios","toast","api","_ref","method","url","body","onSuccess","onError","onEnd","token","localStorage","getItem","headers","data","then","response","catch","error","_error$response","_error$response$data","_error$response2","_error$response4","message","status","_error$response3","_error$response3$data","errors","removeItem","window","location","href","finally"],"sources":["C:/Users/olaah/Downloads/project/src/services/api.js"],"sourcesContent":["import axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst api = ({ method, url, body, onSuccess, onError, onEnd }) => {\n\n    // Retrieve the token from localStorage \n    const token = localStorage.getItem('token');\n\n    // Configure the headers \n    const headers = {\n        'Content-Type': 'application/json'\n    };\n\n    if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    // Make the request\n    axios({\n        method,\n        url,\n        data: body,\n        headers: headers\n    })\n        .then((response) => {\n            if (onSuccess) onSuccess(response.data, toast);\n        })\n        .catch((error) => {\n            const message = error.response?.data?.message || 'An error occurred';\n            toast.error(message);\n\n            if (error.response?.status === 422) {\n                const errors = error.response?.data?.errors || {};\n                if (onError) onError(errors);\n            } else if (error.response?.status === 401) {\n                localStorage.removeItem('token');\n                window.location.href = '/login';\n            }\n        })\n        .finally(() => {\n            if (onEnd) onEnd();\n        });\n};\n\nexport default api;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CAEtC,KAAM,CAAAC,GAAG,CAAGC,IAAA,EAAsD,IAArD,CAAEC,MAAM,CAAEC,GAAG,CAAEC,IAAI,CAAEC,SAAS,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAAN,IAAA,CAEzD;AACA,KAAM,CAAAO,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAE3C;AACA,KAAM,CAAAC,OAAO,CAAG,CACZ,cAAc,CAAE,kBACpB,CAAC,CAED,GAAIH,KAAK,CAAE,CACPG,OAAO,CAAC,eAAe,CAAC,CAAG,UAAUH,KAAK,EAAE,CAChD,CAEA;AACAV,KAAK,CAAC,CACFI,MAAM,CACNC,GAAG,CACHS,IAAI,CAAER,IAAI,CACVO,OAAO,CAAEA,OACb,CAAC,CAAC,CACGE,IAAI,CAAEC,QAAQ,EAAK,CAChB,GAAIT,SAAS,CAAEA,SAAS,CAACS,QAAQ,CAACF,IAAI,CAAEb,KAAK,CAAC,CAClD,CAAC,CAAC,CACDgB,KAAK,CAAEC,KAAK,EAAK,KAAAC,eAAA,CAAAC,oBAAA,CAAAC,gBAAA,CAAAC,gBAAA,CACd,KAAM,CAAAC,OAAO,CAAG,EAAAJ,eAAA,CAAAD,KAAK,CAACF,QAAQ,UAAAG,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBL,IAAI,UAAAM,oBAAA,iBAApBA,oBAAA,CAAsBG,OAAO,GAAI,mBAAmB,CACpEtB,KAAK,CAACiB,KAAK,CAACK,OAAO,CAAC,CAEpB,GAAI,EAAAF,gBAAA,CAAAH,KAAK,CAACF,QAAQ,UAAAK,gBAAA,iBAAdA,gBAAA,CAAgBG,MAAM,IAAK,GAAG,CAAE,KAAAC,gBAAA,CAAAC,qBAAA,CAChC,KAAM,CAAAC,MAAM,CAAG,EAAAF,gBAAA,CAAAP,KAAK,CAACF,QAAQ,UAAAS,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBX,IAAI,UAAAY,qBAAA,iBAApBA,qBAAA,CAAsBC,MAAM,GAAI,CAAC,CAAC,CACjD,GAAInB,OAAO,CAAEA,OAAO,CAACmB,MAAM,CAAC,CAChC,CAAC,IAAM,IAAI,EAAAL,gBAAA,CAAAJ,KAAK,CAACF,QAAQ,UAAAM,gBAAA,iBAAdA,gBAAA,CAAgBE,MAAM,IAAK,GAAG,CAAE,CACvCb,YAAY,CAACiB,UAAU,CAAC,OAAO,CAAC,CAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,QAAQ,CACnC,CACJ,CAAC,CAAC,CACDC,OAAO,CAAC,IAAM,CACX,GAAIvB,KAAK,CAAEA,KAAK,CAAC,CAAC,CACtB,CAAC,CAAC,CACV,CAAC,CAED,cAAe,CAAAP,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}